// Example: No protovalidate constraints (should-fix)
//
// This event contract has the correct structural layout (EventMeta,
// Operation, entity, change event with after + update_mask) but has zero
// protovalidate constraints. Without constraints, invalid data
// (empty IDs, missing timestamps, undefined enum values) passes
// through unchecked.
//
// Expected findings:
//   - Should-fix: event_id has no min_len constraint
//   - Should-fix: event_time / ingest_time not marked required
//   - Should-fix: producer / schema_version have no min_len
//   - Should-fix: meta field not marked required
//   - Should-fix: entity key (product_id) has no min_len
//   - Should-fix: op enum has no defined_only constraint
//
// Standard sections exercised:
//   - Data quality / Schema-level (protovalidate)

syntax = "proto3";

package example.products.v1;

import "google/protobuf/field_mask.proto";
import "google/protobuf/timestamp.proto";

// Correct structure, but no protovalidate import and zero constraints.

message EventMeta {
  string event_id = 1;
  google.protobuf.Timestamp event_time = 2;
  google.protobuf.Timestamp ingest_time = 3;
  string producer = 4;
  string schema_version = 5;
}

enum Operation {
  OPERATION_UNSPECIFIED = 0;
  OPERATION_CREATE     = 1;
  OPERATION_UPDATE     = 2;
  OPERATION_DELETE     = 3;
  OPERATION_SNAPSHOT   = 4;
}

message Product {
  string product_id = 1;
  string display_name = 2;
  int64 price_cents = 3;
  string category = 4;
}

message ProductChangeEvent {
  EventMeta meta = 1;
  string product_id = 2;

  int64 sequence = 3;
  Operation op = 4;

  google.protobuf.FieldMask update_mask = 5;
  Product patch = 6;
  Product after = 7;
}
